/* jdf-1.0.0/ search.js Date:2015-11-28 00:20:38 */
window.searchlog = window.searchlog || function () {
    var a = '//sstat.' + pageConfig.FN_getDomain() + '/scslog?args=';
    var b = '{keyword}^#psort#^#page#^#cid#^' + encodeURIComponent(document.referrer);
    var c = '2';
    var d = '';
    var e = '';
    var f = function () {
        var f = '';
        var g = '';
        var h = '';
        var i = '0';
        if (arguments.length > 0) if (0 == arguments[0]) f = a + c + '^' + b + '^^^58^^' + e + '^' + d;
        else if (1 == arguments[0]) {
            f = 10 != c ? a + '1^' + b + '^' : a + '11^' + b + '^';
            for (var j = 1; j < arguments.length; j++) f += encodeURI(arguments[j]) + '^';
            arguments.length > 3 && '51' == arguments[3] && (g = arguments[1]),
            arguments.length > 3 && '55' == arguments[3] && (h = arguments[1]),
            arguments.length > 3 && '56' == arguments[3] && (i = arguments[1]);
            for (var j = 0, k = 5 - arguments.length; k > j; j++) f += '^';
            f += e + '^' + d
        }
        f = f.replace('#cid#', g),
            f = f.replace('#psort#', h),
            f = f.replace('#page#', i),
            $.getScript(f);
        try {
            JA.tracker.ngloader('search.000006', {
                url: window.location.href
            })
        } catch (l) {
        }
    };
    return f
}();
function search(a) {
    var b,
        c = 'http://search.jd.com/Search?keyword={keyword}&enc={enc}{additional}';
    var d = search.additinal || '';
    var e = document.getElementById(a);
    var f = e.value;
    if (f = f.replace(/^\s*(.*?)\s*$/, '$1'), f.length > 100 && (f = f.substring(0, 100)), '' == f) return void (window.location.href = window.location.href);
    var g = 0;
    'undefined' != typeof window.pageConfig && 'undefined' != typeof window.pageConfig.searchType && (g = window.pageConfig.searchType);
    var h = '&cid{level}={cid}';
    var i = 'string' == typeof search.cid ? search.cid : '';
    var j = 'string' == typeof search.cLevel ? search.cLevel : '';
    var k = 'string' == typeof search.ev_val ? search.ev_val : '';
    switch (g) {
        case 0:
            break;
        case 1:
            j = '-1',
                d += '&book=y';
            break;
        case 2:
            j = '-1',
                d += '&mvd=music';
            break;
        case 3:
            j = '-1',
                d += '&mvd=movie';
            break;
        case 4:
            j = '-1',
                d += '&mvd=education';
            break;
        case 5:
            var l = '&other_filters=%3Bcid1%2CL{cid1}M{cid1}[cid2]';
            switch (j) {
                case '51':
                    h = l.replace(/\[cid2]/, ''),
                        h = h.replace(/\{cid1}/g, '5272');
                    break;
                case '52':
                    h = l.replace(/\{cid1}/g, '5272'),
                        h = h.replace(/\[cid2]/, '%3Bcid2%2CL{cid}M{cid}');
                    break;
                case '61':
                    h = l.replace(/\[cid2]/, ''),
                        h = h.replace(/\{cid1}/g, '5273');
                    break;
                case '62':
                    h = l.replace(/\{cid1}/g, '5273'),
                        h = h.replace(/\[cid2]/, '%3Bcid2%2CL{cid}M{cid}');
                    break;
                case '71':
                    h = l.replace(/\[cid2]/, ''),
                        h = h.replace(/\{cid1}/g, '5274');
                    break;
                case '72':
                    h = l.replace(/\{cid1}/g, '5274'),
                        h = h.replace(/\[cid2]/, '%3Bcid2%2CL{cid}M{cid}');
                    break;
                case '81':
                    h = l.replace(/\[cid2]/, ''),
                        h = h.replace(/\{cid1}/g, '5275');
                    break;
                case '82':
                    h = l.replace(/\{cid1}/g, '5275'),
                        h = h.replace(/\[cid2]/, '%3Bcid2%2CL{cid}M{cid}')
            }
            c = 'http://search.e.jd.com/searchDigitalBook?ajaxSearch=0&enc=utf-8&key={keyword}&page=1{additional}';
            break;
        case 6:
            j = '-1',
                c = 'http://music.jd.com/8_0_desc_0_0_1_15.html?key={keyword}';
            break;
        case 7:
            c = 'http://s.e.jd.com/Search?key={keyword}&enc=utf-8';
            break;
        case 8:
            c = 'http://search.jd.hk/Search?keyword={keyword}&enc=utf-8'
    }
    if ('string' == typeof i && '' != i && 'string' == typeof j) {
        var m = /^(?:[1-8])?([1-3])$/;
        j = '-1' == j ? '' : m.test(j) ? RegExp.$1 : '';
        var n = h.replace(/\{level}/, j);
        n = n.replace(/\{cid}/g, i),
            d += n
    }
    'string' == typeof k && '' != k && (d += '&ev=' + k),
        f = encodeURIComponent(f),
        b = c.replace(/\{keyword}/, f),
        b = b.replace(/\{enc}/, 'utf-8'),
        b = b.replace(/\{additional}/, d),
    'object' == typeof $o && ('string' == typeof $o.lastKeyword && (b += '&wq=' + encodeURIComponent($o.lastKeyword)), 'string' == typeof $o.pvid && (b += '&pvid=' + $o.pvid)),
    ('undefined' == typeof search.isSubmitted || 0 == search.isSubmitted) && (setTimeout(function () {
        window.location.href = b
    }, 10), search.isSubmitted = !0)
}
var $o = function (a) {
    var b = $('#key');
    if (!(b.length < 1)) {
        var c = {
        };
        c.replace = function (a, b) {
            return a.replace(/#{(.*?)}/g, function () {
                var a = arguments[1];
                return 'undefined' != typeof b[a] ? b[a] : arguments[0]
            })
        },
            c.genPvid = function () {
                var a = parseInt(readCookie('__jdu') || '');
                return a || (a = Math.round(1000000000000 * Math.random())),
                    (a.toString(36) + '.' + (new Date).getTime().toString(36)).split('').reverse().join('')
            },
            c.getQueryString = function (b, c) {
                var d = new RegExp('(^|\\?|&)' + b + '=([^&]*)(\\s|&|$)', 'i');
                var e = c ? c : a.location.search;
                return d.test(e) ? RegExp.$2 : ''
            },
            String.prototype.isEmpty = function () {
                return 0 == this.length
            },
            c.textSelect = function (a, b, c) {
                if ('string' == typeof a && (a = document.getElementById(a)), a) {
                    var d = 1 * b,
                        e = 1 * c,
                        f = a.value.length;
                    if (f) if (d || (d = 0), e || (e = f), d > f && (d = f), 0 > d && (d = f + d), 0 > e && (e = f + e), a.createTextRange) {
                        var g = a.createTextRange();
                        g.moveStart('character', - f),
                            g.moveEnd('character', - f),
                            g.moveStart('character', d),
                            g.moveEnd('character', e),
                            g.select()
                    } else a.setSelectionRange(d, e),
                        a.focus()
                }
            },
            c.getSelectText = function (a) {
                return document.selection ? document.selection.createRange().text : a ? a.value.substring(a.selectionStart, a.selectionEnd)  : ''
            };
        var d = '<a style="color:#005AA0" onclick="$o.del(event)">删除</a>';
        var e = '搜索历史',
            f = '约#{amount}个商品',
            g = 'history="1"',
            h = 'style="color:#005AA0"';
        var i = '<li id="d_#{id}" suggest-pos="#{suggest_pos}" title="#{title}" onclick="$o.clickItem(this)" #{history_mark}><div class="search-item" #{history_style}>#{keyword}</div><div class="search-count">#{search_count}</div></li>';
        var j = '<li class="brand-search"><div id="d_#{id}" class="info J_shop_box" style="cursor:default;">网友更喜欢以下品牌</div>#{categorys}</li>';
        var k = '<li class="fore1"><div id="d_#{id}" suggest-pos="#{suggest_pos}" class="fore1" title="#{title}" onclick="$o.clickItem(this)" #{history_mark}><div class="search-item" #{history_style}>#{keyword}</div><div class="search-count">#{search_count}</div></div>#{categorys}</li>';
        var l = '<div id="d_#{id}" suggest-pos="#{suggest_pos}" class="#{className}" title="#{title}" cid="#{cid}" cLevel="#{cLevel}" onclick="$o.clickItem(this)"><div class="search-item">在<strong>#{cname}</strong>分类中搜索</div><div class="search-count">约#{amount}个商品</div></div>';
        var n = '<div id="d_#{id}" suggest-pos="#{suggest_pos}" class="#{className}" title="#{title}" gp="1" onclick="$o.clickItem(this)"><div class="search-item">在<strong>全球购</strong>下搜索</div><div class="search-count">约#{amount}个商品</div></div>';
        var o = '<div id="d_#{id}" suggest-pos="#{suggest_pos}" class="#{className}" title="#{title}" act="#{act_value}" onclick="$o.clickItem(this)"><div class="search-item">在<strong>#{act_name}</strong>的商品中搜索</div><div class="search-count">约#{amount}个商品</div></div>';
        var p = '<div id="d_#{id}" class="bs-item J_shop_box"><a class="logo" href="//mall.jd.com/index-#{shop_id}.html"><img width="90" height="30" src="#{shop_logo}"/></a><a class="name" href="//mall.jd.com/index-#{shop_id}.html">#{shop_name}</a></div>';
        var q = c.genPvid();
        var r = '//dd-search.jd.com/?ver=2&zip=1&key=#{keyword}&pvid=' + q + '&t=#{time}';
        var s = '#FFDFC6';
        var t = '#FFF';
        var u = $('#shelper');
        var v = null != navigator.userAgent.toLowerCase().match(/chrome/);
        var w = {
            '优衣库': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            UNIQLO: {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            '优衣库旗舰店': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            '优衣库官方旗舰店': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            '优衣库男装': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            '优衣库女装': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            '优衣库男衬衫': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            '优衣库羽绒服': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            '优衣库羽绒服轻薄女': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            '优衣库羽绒服轻薄男': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            ZARA: {
                id: 156248,
                name: 'MANGO旗舰店',
                logo: 'jfs/t1783/336/92027725/26116/c8490c46/55cc4736Na8d3436f.jpg'
            },
            'ZARA旗舰店': {
                id: 156248,
                name: 'MANGO旗舰店',
                logo: 'jfs/t1783/336/92027725/26116/c8490c46/55cc4736Na8d3436f.jpg'
            },
            'ZARA官方旗舰店': {
                id: 156248,
                name: 'MANGO旗舰店',
                logo: 'jfs/t1783/336/92027725/26116/c8490c46/55cc4736Na8d3436f.jpg'
            },
            'ZARA男装': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            'ZARA女装': {
                id: 73434,
                name: 'Forever21旗舰店',
                logo: 'jfs/t166/336/2687046160/2415/cf7a53a3/53d5e104N9508871f.jpg'
            },
            'ZARA包包': {
                id: 156248,
                name: 'MANGO旗舰店',
                logo: 'jfs/t1783/336/92027725/26116/c8490c46/55cc4736Na8d3436f.jpg'
            },
            'ZARA连衣裙': {
                id: 73434,
                name: 'Forever21旗舰店',
                logo: 'jfs/t166/336/2687046160/2415/cf7a53a3/53d5e104N9508871f.jpg'
            },
            'ZARA毛呢外套女': {
                id: 73434,
                name: 'Forever21旗舰店',
                logo: 'jfs/t166/336/2687046160/2415/cf7a53a3/53d5e104N9508871f.jpg'
            },
            'ZARA皮衣': {
                id: 156248,
                name: 'MANGO旗舰店',
                logo: 'jfs/t1783/336/92027725/26116/c8490c46/55cc4736Na8d3436f.jpg'
            },
            'ZARA男外套': {
                id: 103760,
                name: 'Gap官方旗舰店',
                logo: 'jfs/t490/213/882341181/3193/2ce3cd8/5493d0b1N34dad42b.png'
            },
            '木林森': {
                id: 110459,
                name: 'CELE旗舰店',
                logo: 'jfs/t2059/336/1039378251/12707/77ce3d29/5656badaN5cb142ba.jpg'
            },
            '木林森男鞋': {
                id: 110459,
                name: 'CELE旗舰店',
                logo: 'jfs/t2059/336/1039378251/12707/77ce3d29/5656badaN5cb142ba.jpg'
            },
            '木林森官方旗舰店': {
                id: 110459,
                name: 'CELE旗舰店',
                logo: 'jfs/t2059/336/1039378251/12707/77ce3d29/5656badaN5cb142ba.jpg'
            },
            CA: {
                id: 82408,
                name: 'CACHE CACHE旗舰店',
                logo: 'jfs/t412/339/566737070/17968/504efcc4/542373f9Nfcca787b.jpg'
            },
            'C&A': {
                id: 82408,
                name: 'CACHE CACHE旗舰店',
                logo: 'jfs/t412/339/566737070/17968/504efcc4/542373f9Nfcca787b.jpg'
            },
            HM: {
                id: 138089,
                name: 'UR旗舰店',
                logo: 'jfs/t1528/256/277269146/8807/5d0c8484/55702da4N5b794649.jpg'
            },
            'H&M': {
                id: 138089,
                name: 'UR旗舰店',
                logo: 'jfs/t1528/256/277269146/8807/5d0c8484/55702da4N5b794649.jpg'
            },
            'STELLA LUNA': {
                id: 60979,
                name: 'Nine West玖熙旗舰店',
                logo: 'g15/M07/10/08/rBEhWFMw6rUIAAAAAAAWThRwvs4AAKongO3b-cAABZm967.jpg'
            },
            '阿玛施': {
                id: 20550,
                name: '哥弟官方旗舰店',
                logo: 'jfs/t1165/292/210609680/4846/34b4321a/550a562dNacfa692b.jpg'
            },
            AMASS: {
                id: 20550,
                name: '哥弟官方旗舰店',
                logo: 'jfs/t1165/292/210609680/4846/34b4321a/550a562dNacfa692b.jpg'
            },
            '无印良品': {
                id: 31554,
                name: '茵曼旗舰店',
                logo: 'g10/M00/01/0E/rBEQWFEGJ8cIAAAAAABW75-Gv7kAAASIwBEQwUAAFcH289.jpg'
            },
            IT: {
                id: 48720,
                name: 'crz旗舰店',
                logo: 'g15/M04/14/1A/rBEhWlNGG9kIAAAAAAAYSMYbT1MAALhkAAmoy8AABhg940.jpg'
            },
            '阿玛施女装正品': {
                id: 20550,
                name: '哥弟官方旗舰店',
                logo: 'jfs/t1165/292/210609680/4846/34b4321a/550a562dNacfa692b.jpg'
            }
        };
        r += function () {
            var d = '&curr_url=' + encodeURIComponent(a.location.host + a.location.pathname),
                e = '';
            if (a.QUERY_KEYWORD && (d += '&search_key=' + encodeURIComponent(a.QUERY_KEYWORD)), a.pageConfig && a.pageConfig.product && a.pageConfig.product.cat) e = '&cid1=' + (a.pageConfig.product.cat[0] || ''),
                e += '&cid2=' + (a.pageConfig.product.cat[1] || ''),
                e += '&cid3=' + (a.pageConfig.product.cat[2] || '');
            else if ('list.jd.com' == a.location.host) if (a.pageConfig && a.pageConfig.queryParam) e = '&cid1=' + (a.pageConfig.queryParam.c1 || ''),
                e += '&cid2=' + (a.pageConfig.queryParam.c2 || ''),
                e += '&cid3=' + (a.pageConfig.queryParam.c3 || '');
            else {
                var f = decodeURIComponent(c.getQueryString('cat')).split(',');
                e = '&cid1=' + (f[0] || ''),
                    e = '&cid2=' + (f[1] || ''),
                    e = '&cid3=' + (f[2] || '')
            }
            return d + e
        }(a.location.href);
        function x() {
            this.length = 0,
                this.index = - 1,
                this.iLastModified = 0,
                this.lastKeyword = !1,
                this.keep_keyword = '',
                this.pvid = q,
                this.enable_remind = !0,
                this.IME = !1
        }
        x.prototype.init = function () {
            this.length = 0,
                this.index = - 1,
                search.additinal = ''
        },
            x.prototype.hideTip = function () {
                this.init(),
                    this.lastKeyword = !1;
                var a = c.getSelectText(b[0]);
                this.keep_keyword && a && this.keep_keyword + a == b.val() && b.val(this.keep_keyword),
                    u.html('').hide()
            },
            x.prototype.clickItem = function (a) {
                var c = a.getAttribute('cid'),
                    d = '&suggest=' + a.getAttribute('suggest-pos');
                search.cid = null != c && '' != c ? c : null;
                var e = a.getAttribute('cLevel');
                search.cLevel = null != e && '' != e ? e : null;
                var f = a.getAttribute('title');
                null == f || $.trim(f).isEmpty() || b.val(f),
                null !== a.getAttribute('pm_type') && (d += '&prom_type=0'),
                null !== a.getAttribute('gp') && (d += '&gp=1'),
                null !== a.getAttribute('act') && (d += a.getAttribute('act')),
                    search.additinal = d,
                    search('key')
            },
            x.prototype.mouseenter = function (a) {
                var a = $(a);
                a.attr('history') && a.find('.search-count').html(d),
                    a.hasClass('J_shop_box') ? a.find('.name').css('text-decoration', 'underline')  : a.css('background', s);
                var b = a.attr('id').split('_'),
                    c = parseInt(b[1], 10);
                if (c != this.index) {
                    if (this.index > - 1) {
                        var f = $('#d_' + this.index);
                        f.css('background', t),
                        f.attr('history') && f.find('.search-count').html(e),
                        f.hasClass('J_shop_box') && f.find('.name').css('text-decoration', 'none')
                    }
                    this.index = c
                }
            },
            x.prototype.mouseleave = function (a) {
                a.css('background', t),
                a.attr('history') && a.find('.search-count').html(e)
            },
            x.prototype.selectItemNode = function (a) {
                var c = this;
                var f = $('#d_' + c.index + ':visible');
                f.css('background-color', t),
                f.attr('history') && f.find('.search-count').html(e),
                f.hasClass('J_shop_box') && f.find('.name').css('text-decoration', 'none'),
                - 1 == c.index && - 1 == a && (a = 0),
                    c.index = (c.length + c.index + a) % c.length;
                var g = $('#d_' + c.index),
                    h = '&suggest=' + g.attr('suggest-pos');
                if (g.length > 0) {
                    g.attr('history') && g.find('.search-count').html(d),
                        g.hasClass('J_shop_box') ? g.find('.name').css('text-decoration', 'underline')  : g.css('background-color', s);
                    var i = g.attr('title');
                    null == i || $.trim(i).isEmpty() || b.val(i);
                    var j = g.attr('cid');
                    search.cid = null != j && '' != j ? j : null;
                    var k = g.attr('cLevel');
                    search.cLevel = null != k && '' != k ? k : null,
                    'undefined' != typeof g.attr('pm_type') && (h += '&prom_type=0'),
                    'undefined' != typeof g.attr('gp') && (h += '&gp=1'),
                    'undefined' != typeof g.attr('act') && (h += g.attr('act')),
                        search.additinal = h
                }
            },
            x.prototype.input = function () {
                var a = this;
                a.timeoutId && clearTimeout(a.timeoutId),
                    a.timeoutId = setTimeout(function () {
                        var d = $.trim(b.val());
                        if (d === a.lastKeyword || !(d || readCookie('_pst') || readCookie('_tp'))) return !1;
                        a.lastKeyword = d;
                        var e = c.replace(r, {
                            keyword: encodeURIComponent(d),
                            time: (new Date).getTime()
                        });
                        $.ajax({
                            url: e,
                            dataType: 'jsonp',
                            scriptCharset: 'utf-8',
                            jsonp: 'callback',
                            cache: !0,
                            success: function (b) {
                                return function (c) {
                                    a.iLastModified > b || (a.iLastModified = b, c && a.onloadItems(c))
                                }
                            }((new Date).getTime())
                        })
                    }, 150)
            },
            x.prototype.keydown_up = function (c) {
                var d = this;
                var e = c || a.event;
                0 == b.length && (b = $('#key')),
                0 == u.length && (u = $('tie'));
                var f = e.keyCode;
                switch (f) {
                    case 38:
                        d.selectItemNode( - 1);
                        break;
                    case 40:
                        d.selectItemNode(1);
                        break;
                    case 27:
                        d.hideTip();
                        break;
                    case 37:
                        break;
                    case 39:
                        break;
                    default:
                        d.IME = 229 == f,
                            8 == f || 46 == f ? d.disableRemind()  : d.enable_remind = !0,
                        $.browser.mozilla || d.input()
                }
            },
            x.prototype.onloadItems = function (d) {
                if (0 == d.length) return void this.hideTip();
                var q = this;
                q.init();
                var r = 0;
                a.pageConfig && a.pageConfig.searchType && (r = a.pageConfig.searchType);
                var s = 1,
                    t = sCategoriesHtml = '';
                var v = 0,
                    x = 0,
                    y = $.trim(b.val()),
                    z = y.toUpperCase();
                for (var A = 0, B = d.length; B > A; A++) {
                    var C = d[A];
                    if (C.rem && this.remindKey(C.rem.rei, C.rem.req), C && C.key && (C.key != y || 0 == x)) {
                        var D = $.trim(C.key),
                            E = C.his ? e : c.replace(f, {
                                amount: C.qre
                            }),
                            F = C.his ? g : '',
                            G = C.his ? h : '';
                        var H = D.indexOf(y);
                        var I = D;
                        if (y.length && 0 == H && !C.his && (I = y + '<strong>' + D.substring(H + y.length) + '</strong>'), 0 == x) {
                            if ('object' == typeof w[z]) {
                                var J = w[z];
                                sCategoriesHtml += c.replace(p, {
                                    id: ++v,
                                    shop_id: J.id,
                                    shop_name: J.name,
                                    shop_logo: '//img30.360buyimg.com/n1/s90x30_' + J.logo
                                }),
                                    t += c.replace(j, {
                                        id: 0,
                                        categorys: sCategoriesHtml
                                    }),
                                    x++;
                                continue
                            }
                            if ((0 == r || 1 == r) && (C.wor && (sCategoriesHtml += c.replace(n, {
                                    id: ++v,
                                    title: D,
                                    className: 'item1',
                                    amount: C.wor,
                                    suggest_pos: s + '.wor.0'
                                })), C.acq && C.acu && (sCategoriesHtml += c.replace(o, {
                                    id: ++v,
                                    title: D,
                                    className: 'item1',
                                    act_name: C.acq,
                                    act_value: C.acu,
                                    amount: C.acc,
                                    suggest_pos: s + '.acq.0'
                                }))), C.ci && C.ci.length > 0) for (var K = 0, L = C.ci.length; L > K; K++) {
                                var M = C.ci[K].cid;
                                if (0 == r) {
                                    if ('string' == typeof M && /^[1-8]4$/.test(M)) continue
                                } else if (5 == r) {
                                    if ('string' == typeof M && !/^[5-8]2$/.test(M)) continue
                                } else if (1 == r || 2 == r || 3 == r || 4 == r) continue;
                                sCategoriesHtml += c.replace(l, {
                                    id: ++v,
                                    title: D,
                                    cid: M,
                                    cLevel: C.ci[K].cle,
                                    className: 'item1',
                                    cname: C.ci[K].cna,
                                    amount: C.ci[K].cre,
                                    suggest_pos: s + '.cid.' + (K + 1)
                                })
                            }
                            0 == v && (v = - 1)
                        }
                        t += 0 == x && v > 0 ? c.replace(k, {
                            id: 0,
                            title: D,
                            keyword: I,
                            suggest_pos: s++ + (C.his ? '.his.0' : '.def.0'),
                            categorys: sCategoriesHtml,
                            search_count: E,
                            history_mark: F,
                            history_style: G
                        })  : c.replace(i, {
                            id: ++v,
                            title: D,
                            keyword: I,
                            suggest_pos: s++ + (C.his ? '.his.0' : '.def.0'),
                            search_count: E,
                            history_mark: F,
                            history_style: G
                        }),
                            x++
                    }
                }
                q.length = ++v,
                    '' != t ? (t += '<li class="close" onclick="$o.hideTip()">关闭</li>', u.html(t).show(), u.find('[id^="d_"]').bind('mouseleave', function () {
                        q.mouseleave($(this))
                    }).bind('mouseenter', function () {
                        q.mouseenter($(this))
                    }))  : u.html('').hide()
            },
            x.prototype.disableRemind = function () {
                search.additinal = '&suggest=1.rem.1',
                    this.enable_remind = !1
            },
            x.prototype.remindKey = function (a, d) {
                b.val() == a && this.enable_remind && (v && this.IME && /\w/.test(a.substr( - 1)) || (b.val(d), this.keep_keyword = a, search.additinal = '&suggest=1.rem.0', c.textSelect('key', a.length)))
            },
            x.prototype.bind_input = function () {
                $.browser.mozilla ? (b.bind('keydown', function (a) {
                    y.keydown_up(a)
                }), b.bind('input', function (a) {
                    y.input(a)
                }))  : b.bind('keydown', function (a) {
                    y.keydown_up(a)
                }),
                    b.focus(function () {
                        setTimeout(function () {
                            y.input()
                        }, 10)
                    }),
                    u.parent().bind('mouseenter', function () {
                        y.e_position = !0,
                        y.timeoutId && clearTimeout(y.timeoutId)
                    }).bind('mouseleave', function () {
                        y.e_position = !1,
                            y.timeoutId = setTimeout(function () {
                                y.hideTip()
                            }, 500)
                    }),
                    $(document).click(function () {
                        y.e_position || y.hideTip()
                    })
            },
            x.prototype.del = function (c) {
                var d = this;
                c = c ? c : a.event,
                    a.event ? (c.cancelBubble = !0, c.returnValue = !1)  : (c.stopPropagation(), c.preventDefault());
                var e = $(c.srcElement ? c.srcElement : c.target),
                    f = e.parent().parent().attr('title');
                $.ajax({
                    url: '//search.jd.com/suggest.php?op=del&callback=?&key=' + encodeURIComponent(f),
                    dataType: 'jsonp',
                    scriptCharset: 'utf-8',
                    beforeSend: function () {
                        e.parents('li').hide()
                    },
                    success: function () {
                        d.lastKeyword = !1,
                            b.focus()
                    }
                })
            };
        var y = new x;
        return y.bind_input(),
            y
    }
}(window);