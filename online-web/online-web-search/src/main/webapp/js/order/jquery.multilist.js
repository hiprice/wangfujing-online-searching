(function($){var methods={init:function(options){return this.each(function(){var $this=$(this);var settings=$this.data('multilist');if(typeof(settings)=='undefined'){var defaults={value:''}
settings=$.extend({},defaults,options);$this.data('multilist',settings);}else{settings=$.extend({},settings,options);}
var opts=options;var $this=$(this);var stat=0;var $btn=$this.children('.ui-droplist-button');var $list=$this.children('.ui-droplist-list');var $val=$this.children('.ui-droplist-data');var enabled=true;if($this.attr('data-def').length<=0){$this.attr('data-def',opts.labelDef);}
$this.bind('listdown',function(){slideList($this,'down');});$this.bind('listup',function(){slideList($this,'up');});$val.text($this.attr('data-def'));$val.click(function(){if(enabled){stat=(stat+1)%2;if(stat){slideList($this,'down');$this.trigger("droplistOpen");stat=0;}else{slideList($this,'up');}}
return false;});$list.find('li a').bind('click',function(){slideList($this,'up');stat=0;$val.text($(this).text());$val.attr('idx',$(this).attr('idx'));$val.attr('data-code',$(this).attr('data-code'));$this.trigger('change',{flag:'0'});return false;});$this.bind('bindListClick',function(){$list.find('li a').bind('click',function(){slideList($this,'up');stat=0;$val.text($(this).text());$val.attr('idx',$(this).attr('idx'));$val.attr('data-code',$(this).attr('data-code'));$this.trigger('change',{flag:'0'});return false;});$('body').click(function(e){if(!$(this).hasClass('droplist')){slideList(".droplist",'up');}});});$btn.click(function(){$val.trigger('click');return false;});});},destroy:function(options){return $(this).each(function(){var $this=$(this);$this.removeData('multilist');});},val:function(options){var someValue=this.find('.ui-droplist-data').text();return someValue;},idx:function(options){var someValue=this.find('.ui-droplist-data').attr("idx");return someValue;},dcode:function(options){var someValue=this.find('.ui-droplist-data').attr("data-code");return someValue;},setIndex:function(data){if(data==-1){this.find('.ui-droplist-data').text('请选择').attr("idx",-1);}else{var $val=this.find(".ui-droplist-list li a[idx='"+data+"']");this.find('.ui-droplist-data').text($val.text()).attr("idx",$val.attr('idx'));}},setDataCode:function(data){if(data==-1){this.find('.ui-droplist-data').text('请选择').attr("data-code",-1);}else{var $val=this.find(".ui-droplist-list li a[data-code='"+data+"']");this.find('.ui-droplist-data').text($val.text()).attr("data-code",$val.attr('data-code'));}},setVal:function(data){$val=this.find(".ui-droplist-data");this.find(".ui-droplist-list li a").each(function(){if($(this).text()==data){$val.text(data);$val.attr('idx',$(this).attr('idx'));$val.attr('data-code',$(this).attr('data-code'));}else{}});},setDef:function(data){$val=this.find(".ui-droplist-data");if(!data)
data='请选择';$val.text(data);$val.attr('idx',-1);},toggleDisabled:function(data){if(data){enabled=false;var _wid=this.outerWidth();if(!this.find(".ui-droplist-disabled").length>0)
this.prepend($("<div/>").addClass('ui-droplist-disabled').css('width',_wid).css({'height':'30px'}));var l,t;$("#rcpt-city,#rcpt-zone").each(function(){var offset=$(this).position(),l=offset.left,t=offset.top;$(this).find(".ui-droplist-disabled").css({'left':0,'top':0});});}else{enabled=true;this.find(".ui-droplist-disabled").remove();}}};$.fn.multilist=function(){var method=arguments[0];if(methods[method]){method=methods[method];arguments=Array.prototype.slice.call(arguments,1);}else if(typeof(method)=='object'||!method){method=methods.init;}else{$.error('Method '+method+' does not exist on jQuery.pluginName');return this;}
return method.apply(this,arguments);}
function slideList(_target,_op){$this=$(_target);$list=$this.children('.ui-droplist-list');$btn=$this.children('.ui-droplist-button');if(_op=='down'){$list.show(300);$btn.addClass('ui-droplist-button-down');}else if(_op=='up'){$list.hide(300);$btn.removeClass('ui-droplist-button-down');}}})(jQuery);